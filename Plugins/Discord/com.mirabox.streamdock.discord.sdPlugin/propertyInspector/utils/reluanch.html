<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Restart the Discord app</title>
  <style>
    html, body {
      height: 100%; /* 确保html和body占据整个视口高度 */
      margin: 0;   /* 移除默认边距 */
      padding: 0;  /* 移除默认内边距 */
    }

    body {
      display: flex;             /* 将body变为flex容器 */
      justify-content: center;   /* 水平居中内容 */
      align-items: center;       /* 垂直居中内容 */
      font-family: sans-serif;   /* 可选：设置一个更现代的字体 */
      background-color: #f0f2f5; /* 可选：设置一个浅灰色背景 */
    }

    #box {
      /* width: 100%; 不再需要，因为body已经居中了所有内容 */
      /* display: flex; 不再需要，因为内容已经在body中居中 */
      /* justify-content: center; 不再需要 */
      text-align: center; /* 确保h2内的文本对齐 */
      padding: 20px; /* 增加一些内边距 */
      border: 1px solid #ccc; /* 添加边框 */
      border-radius: 8px; /* 圆角 */
      background-color: #fff; /* 白色背景 */
      box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* 添加阴影 */
    }

    h2 {
      color: #333; /* 设置字体颜色 */
      font-size: 1.5em; /* 调整字体大小 */
      margin: 0; /* 移除h2默认的外边距 */
    }
  </style>
</head>
<body>
  <div id="box">
    <h2>If you can't connect, please restart the Discord app</h2>
  </div>
  <script>
    // 自动翻译页面
    $lang = window.opener.$lang;

    // 遍历文本节点并翻译所有文本节点
    const main = document.querySelector('#box');
    const walker = document.createTreeWalker(main, NodeFilter.SHOW_TEXT, (e) => {
        return e.data.trim() && NodeFilter.FILTER_ACCEPT;
    });
    while (walker.nextNode()) {
        console.log(walker.currentNode.data);
        if($lang[walker.currentNode.data]) {
            walker.currentNode.data = $lang[walker.currentNode.data];
        }
    }
    // placeholder 特殊处理
    const translate = item => {
        if (item.placeholder?.trim()) {
            console.log(item.placeholder);
            if($lang[item.placeholder]) {
                item.placeholder = $lang[item.placeholder];
            }
        }
    };
    document.querySelectorAll('input').forEach(translate);
    document.querySelectorAll('textarea').forEach(translate);
  </script>
</body>
</html>